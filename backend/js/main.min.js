window.ytArtist=window.ytArtist||{};var playerTotalTime=null,myTrackBar=null,ytIds={};$("#playervid").hide();var player=videojs("playervid",{techOrder:["youtube"]}).ready(function(){this.on("play",function(){playerTotalTime=player.duration(),$("#totaldur").text(ytArtist.setSeconds2Time(playerTotalTime)),myTrackBar=setInterval(function(){var t=player.currentTime(),e=t/playerTotalTime*100,i=100*player.bufferedPercent();$(".track").width(e+"%"),$(".player-tracking-bar").html(ytArtist.setSeconds2Time(t)),$(".buffer").width(i+"%"),$("#current-time").text(ytArtist.setSeconds2Time(t))},1e3),$("#btnPause").show(),$("#btnPlay").hide()}),this.on("ready",function(){$(".sound-bar").height(100*this.volume()+"%")}),this.on("pause",function(){$("#btnPlay").show(),$("#btnPause").hide()}),this.on("ended",function(){clearTimeout(myTrackBar)}),this.on("error",function(){next()})});ytArtist.n=function(t){return t>9?""+t:"0"+t},ytArtist.setSeconds2Time=function(t){return"number"!=typeof t&&(t=0),ytArtist.n(parseInt(t/60))+":"+ytArtist.n(parseInt(t%60))},$(document).ready(function(){function t(){if(prevItem=$("ul.tracks li.active").next(),prevItem.length>0){var t=prevItem.find("h2").text(),e=prevItem.find("h1").text();$("ul.tracks li.active").removeClass("active"),$(".spinner").show(),$.ajax({type:"GET",url:"libs/ajax.functions.php",data:"ytTitle="+e+"&ytArtist="+t,success:function(t){ytIds=JSON.parse(t),prevItem.addClass("active"),$(".spinner").hide(),player.src("http://www.youtube.com/watch?v="+ytIds.id),$("#ytlink").attr("href","http://www.youtube.com/watch?v="+ytIds.id),$("#ytlink").attr("target","_blank"),$("#playervid").show(),player.play(),ytArtist.playAnimation(),$("#track-title").html(e+"<br/>")}})}}var e=$("#artistimg"),i=e.attr("src");e.hide(),$(".player-artist").css("background","url("+i+") no-repeat center top scroll"),$(".playing").hide(),$(".spinner").hide();var a=$(".player-yt").height(),r=0,n=window.parent.$("iframe").height();$(".playlist-body").css("margin-top",a),$(".playlist-body").css("height",n-a-r),$(".player-artist p").css("bottom","0"),ytArtist.playAnimation=function(){$(".player-artist p").css("bottom","-55px"),$(".time").css("top","-23px"),setTimeout(function(){$(".playing").show(),$(".time").css("top","0px"),$(".player-artist p").css("bottom","0px")},500)},$(".sound-bg").click(function(t){var e=$(this).offset().top,i=Math.floor(100-(t.pageY-e)/$(this).height()*100);$(".sound-bar").height(i+"%"),player.volume(i/100)}),$(".player-tracking").click(function(t){var e=$(this).offset().left,i=Math.floor((t.pageX-e)/$(this).width()*100);$(".track").width(i+"%");var a=i/100*playerTotalTime;player.currentTime(a)}),$("#ytplay").click(function(t){t.preventDefault(),$("#btnPlay").is(":visible")?player.play():player.pause()}),$("#btnNext").click(function(){t()}),$("#btnPrev").click(function(){if(nextItem=$("ul.tracks li.active").prev(),nextItem.length>0){var t=nextItem.find("h2").text(),e=nextItem.find("h1").text();$("ul.tracks li.active").removeClass("active"),$(".spinner").show(),$.ajax({type:"GET",url:"libs/ajax.functions.php",data:"ytTitle="+e+"&ytArtist="+t,success:function(t){ytIds=JSON.parse(t),nextItem.addClass("active"),$(".spinner").hide(),player.src("http://www.youtube.com/watch?v="+ytIds.id),$("#ytlink").attr("href","http://www.youtube.com/watch?v="+ytIds.id),$("#ytlink").attr("target","_blank"),$("#playervid").show(),player.play(),ytArtist.playAnimation(),$("#track-title").html(e+"<br/>")}})}}),$("ul.tracks li").click(function(){var t=$(this);$(".time").hide();var e=$("ul.tracks li");e.removeClass("active");var i=t.find("h2").text(),a=t.find("h1").text();$(".spinner").show(),$.ajax({type:"GET",url:"libs/ajax.functions.php",data:"ytTitle="+a+"&ytArtist="+i,success:function(e){ytIds=JSON.parse(e),t.addClass("active"),$(".spinner").hide(),player.src("http://www.youtube.com/watch?v="+ytIds.id),$("#ytlink").attr("href","http://www.youtube.com/watch?v="+ytIds.id),$("#ytlink").attr("target","_blank"),$("#playervid").show(),player.play(),ytArtist.playAnimation(),$("#track-title").html(a+"<br/>")}})}),$("#volLink").click(function(t){t.preventDefault(),$(event.target).hasClass("volm")||($("#volOn").is(":visible")?($("#volOff").show(),$("#volOn").hide(),player.volume(0)):($("#volOn").show(),$("#volOff").hide(),player.volume(1)))})});